{% extends "base.html" %}
{% block content %}

<h1>Cluster Feature Map</h1>
<p>Enter your Job ID to view the feature map.</p>

<div class="feature-section">
  <div class="search-box">
    <input type="text" id="jobIdInput" placeholder="Please enter your Job ID">
    <button id="searchBtn">Search</button>
  </div>
  <p id="searchMessage" class="message"></p>
</div>

<script>
document.getElementById("searchBtn").addEventListener("click", async function() {

  const jobId = document.getElementById("jobIdInput").value.trim();
  const msg = document.getElementById("searchMessage");

  if (!jobId) {
    msg.textContent = "Please enter a Job ID.";
    msg.style.color = "red";
    return;
  }

  msg.textContent = "Searching...";
  msg.style.color = "gray";

  const response = await fetch(`/api/feature/${jobId}`);
  const data = await response.json();

  if (!data.found) {
    msg.textContent = "âŒ Job ID not found.";
    msg.style.color = "red";
    return;
  }

  msg.textContent = "Redirecting...";
  msg.style.color = "green";

  // ğŸ”¥ ç§»é™¤å°¾æ–œç·šç‰ˆæœ¬
  window.location.href = `/feature-map/${jobId}`;
});
</script>

{% endblock %}





